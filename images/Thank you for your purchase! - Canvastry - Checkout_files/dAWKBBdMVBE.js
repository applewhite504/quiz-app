if (self.CavalryLogger) { CavalryLogger.start_js(["UnirF"]); }

__d("MessengerDiscoveryPluginTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("plugin_logger_route:MessengerDiscoveryPluginLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("plugin_logger_route:MessengerDiscoveryPluginLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("plugin_logger_route:MessengerDiscoveryPluginLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUserFbid=function(a){this.$1.user_fbid=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={app_id:!0,event:!0,name:!0,page_id:!0,time:!0,user_fbid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MNCommerceLogger",["BanzaiLogger","BanzaiODS"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("BanzaiLogger").create({signal:!0});function h(a){switch(a){case"devx_upsell_learn_more_clicked":return"devx.upsell.learn_more.clicked";default:return a}}a={logClick:function(a,c,d){b("BanzaiODS").bumpEntityKey(2966,"messenger_commerce",h(a)),g.log("MessengerCommerceLoggerConfig",{brand_app_id:c,user_fbid:d,event:a})},logAuthEvent:function(a,c,d,e){g.log("MessengerCommerceLoggerConfig",{brand_app_id:a,page_id:c,user_fbid:d,event:e}),b("BanzaiODS").bumpEntityKey(2966,"messenger_commerce","auth."+e+".all")}};e.exports=a}),null);
__d("PluginMessengerCheckbox",["DOMEvent","DOMEventListener","FormSubmit","IntersectionObserver","MessengerDiscoveryPluginTypedLogger","MNCommerceLogger","PluginMessage","PluginOptin","UnverifiedXD","intersectionObserverEntryIsIntersecting"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();var c=a.appID,d=a.checkbox,e=a.dataRef,f=a.form,g=a.notYouLink,h=a.pageID;a.pluginCheckOutOfView;var i=a.pluginStateInput,j=a.shouldPersonalize,k=a.userID,l=a.userRef;a=function(a,c){return b("DOMEventListener").add(a,"click",c)};var m=function(a,c){return b("DOMEventListener").add(a,"change",c)},n=function(a){new(b("DOMEvent"))(a).kill(),new(b("PluginOptin"))("messenger_checkbox").addLoginParams({logged_in:!1,switch_user:!0,page_id:h,app_id:c,connected:!1,is_inapp_browser:!1,show_subtitle:!1}).addReturnParams({source:"messenger_checkbox"}).start(),b("PluginMessage").listen()},o=function(a){return b("UnverifiedXD").send({type:"sdk_event",event:"messenger_checkbox",data:JSON.stringify(a)})},p=function(a){b("MNCommerceLogger").logAuthEvent(c,h,k,a)},q=function(a){b("MNCommerceLogger").logAuthEvent(c,h,null,a)},r=function(a){new(b("MessengerDiscoveryPluginTypedLogger"))().setAppID(c).setPageID(h).setUserFbid(k).setEvent(a).setName("checkbox_plugin").logImmediately()},s=function(a){new(b("MessengerDiscoveryPluginTypedLogger"))().setAppID(c).setPageID(h).setEvent(a).setName("checkbox_plugin").logImmediately()},t=function(a){a.target.checked=!1,p("messenger_prechecked_login"),o({event:"login",user_ref:l,ref:e}),n(a)},u=function(a){p("messenger_prechecked_notyou"),o({event:"not_you",user_ref:l,ref:e}),n(a)};g!=null&&a(g,u);var v=null;a=new(b("IntersectionObserver"))(function(a,c){a.forEach(function(a){var c=b("intersectionObserverEntryIsIntersecting")(a);c&&a.intersectionRatio===1?v=!0:!c&&a.intersectionRatio===0&&(v===null&&(q("messenger_prechecked_rendered_out_of_view"),s("messenger_prechecked_rendered_out_of_view")),v=!1)})},{threshold:[0,1]});a.observe(f);g=function(a){a.target.checked?(i.value="checked",p("messenger_prechecked_checked"),r("messenger_prechecked_checked"),v||(p("messenger_prechecked_checked_out_of_view"),r("messenger_prechecked_checked_out_of_view"))):(i.value="unchecked",p("messenger_prechecked_unchecked"),r("messenger_prechecked_unchecked")),b("FormSubmit").send(f),o({event:"checkbox",user_ref:l,ref:e,state:i.value})};!j?m(d,t):m(d,g)};e.exports=a}),null);
__d("PluginMessengerMessageUs",["Event","MNCommerceLogger"],(function(a,b,c,d,e,f){"use strict";a={setupMessageUsLogging:function(a,c,d,e){b("Event").listen(a,"click",function(){b("MNCommerceLogger").logAuthEvent(c,d,e,"message_us_clicked")})}};e.exports=a}),null);
__d("XMNSendToMessengerContinueAsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/messenger_platform/send_to_messenger/",{next:{type:"String",required:!0},page_id:{type:"String",required:!0},app_id:{type:"String",required:!0},ref:{type:"String"},switch_user:{type:"String"},is_inapp_browser:{type:"Bool",defaultValue:!1}})}),null);
__d("PluginSendToMessenger",["Arbiter","CSS","DOMEvent","DOMEventListener","FormSubmit","MNCommerceLogger","Plugin","PluginDOMEventListener","PluginMessage","PluginOptin","PluginResize","PopupWindow","UnverifiedXD","URI","XMNSendToMessengerContinueAsController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=13;a=function(){__p&&__p();function a(a,c,d,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v){__p&&__p();var w=this;this.$1=!1;b("PluginResize").auto(s);(!f||k&&!l)&&b("CSS").hide(e);l=function(a,c){return b("PluginDOMEventListener").add(a,"click",function(a){n==="0"&&u&&location.reload(),c(a)})};e=function(a){return b("DOMEventListener").add(a,"keydown",function(b){b.keyCode===h&&a.click()})};v=u&&v;if(f){var x=new(g||(g=b("URI")))(window.location.search).getQueryData();x.reload==="reload"&&(this.$1=!0,x.id===m&&(b("CSS").show(c),b("CSS").hide(a)));x.act==="send"&&!v&&(b("CSS").show(c),b("CSS").hide(a),i&&this.submit(s));v&&(this.submit(s),b("CSS").show(c),b("CSS").hide(a))}x=function(d){__p&&__p();b("MNCommerceLogger").logAuthEvent(p,o,n,"send_to_messenger_clicked");b("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"clicked",ref:q})});if(k||!r&&!w.$1){new(b("DOMEvent"))(d).kill();if(!j)new(b("PluginOptin"))("send_to_messenger").addLoginParams({logged_in:f,switch_user:k,page_id:o,app_id:p,ref:q,connected:!1,is_inapp_browser:!1,show_subtitle:!0}).addReturnParams({act:"send"}).start();else if(t!=null){d=b("XMNSendToMessengerContinueAsController").getURIBuilder().setString("next",t.toString()).setString("page_id",o).setString("app_id",p).setString("ref",q).setBool("is_inapp_browser",!0).getURI();b("PopupWindow").open(d.toString(),420,450)}}else b("MNCommerceLogger").logAuthEvent(p,o,n,"send_to_messenger_opt_in_client_event"),w.submit(s),b("CSS").show(c),b("CSS").hide(a),b("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"opt_in",ref:q})})};i=function(a){b("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"not_you",ref:q})}),new(b("PluginOptin"))("send_to_messenger").addLoginParams({logged_in:!1,switch_user:!0,page_id:o,app_id:p,ref:q,connected:r,is_inapp_browser:j,show_subtitle:!0}).addReturnParams({act:"send"}).start(),b("PluginMessage").listen()};l(a,x);e(a);d!=null&&(l(d,i),e(d));v=function(d,e){e.identifier===m&&(b("CSS").show(c),b("CSS").hide(a))};b("Arbiter").subscribe(b("Plugin").CONNECT,v)}var c=a.prototype;c.submit=function(a){b("FormSubmit").send(a)};return a}();e.exports=a}),null);